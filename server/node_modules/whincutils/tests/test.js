
var whincutils	= require('../index.js');
var Testing	= whincutils.Testing;
var Common	= whincutils.Common;

var json	= Common.json;
var e		= Common.serverError();
var t		= 10000;
var url		= 'http://jsonserver.dev.webheroes.ca';
// var url		= 'http://pantry.webheroes.ca:8000/api/v1/'
var API		= Testing.api.defaults({
    json: true,
    baseUrl: url,
    timeout: t
});
API.create	= API.defaults({
    method: "POST"
});
API.update	= API.defaults({
    method: "PATCH"
});
API.replace	= API.defaults({
    method: "PUT"
});
API.remove	= API.defaults({
    method: "DELETE"
});

// API('/posts').then(function(resp) {
//     console.log( json(resp.data) );
// }, e);

// Testing.api('/users', {
//     baseUrl: url,
//     timeout: t
// }).then(function(resp) {
//     // console.log( json(resp.data) );
// }, e);

API.create('/posts', {body:{
    title: Math.random()
}}).then(function(resp) {
    console.log( json(resp.data) );
    var id		= resp.data.id;
    API.remove('/posts/'+id).then(function(resp) {
	console.log( json(resp.data) );
    }, e);
}, e);

API.create('/posts', {body:{
    title: Math.random()
}}).then(function(resp) {
    console.log( json(resp.data) );
    var id		= resp.data.id;
    API.remove('/posts/'+id).then(function(resp) {
	console.log( json(resp.data) );
    }, e);
}, e);

API.create('/posts', {body:{
    title: Math.random()
}}).then(function(resp) {
    console.log( json(resp.data) );
    var id		= resp.data.id;
    API.remove('/posts/'+id).then(function(resp) {
	console.log( json(resp.data) );
    }, e);
}, e);

API.create('/posts', {body:{
    title: Math.random()
}}).then(function(resp) {
    console.log( json(resp.data) );
    var id		= resp.data.id;
    API.remove('/posts/'+id).then(function(resp) {
	console.log( json(resp.data) );
    }, e);
}, e);
